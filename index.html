<!DOCTYPE html>
<html>
    <head>
        <link rel="shortcut icon" href="nuke.png">
        <link rel="icon" type="image/png" href="nuke.png" />
        <link rel="image_src" href="nuke.png" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <link rel="stylesheet" href="style.css">
        <title>Next Block Defcon Level</title>
        <script src="script.js"></script>
        <script src="tps.js"></script>
        <script type="module" src="https://unpkg.com/metallicss@4.0.3/dist/metallicss.min.js"></script>
    </head>
    <body>
        <div class="everything">
          <div class="words">
            <h1>Next Block Defcon Level</h1>
            <p><span style="font-weight: bold;">Block Height: </span><span class="last_block">loading...</span></p>
            <div>
                <div class="words1"><div class="ttnb_probability" style="width: 50%; margin: 0; text-align: center; line-height: 2rem; height: 2rem; border: black ridge 10px; margin-bottom: 7px"></div><div class="tier"><span style="font-weight: bold;"></span><span class="tier_info">loading...</span></div></div>
                <h2>What is going on?</h2>
                <p>
                    This is a bitcoin block time visualizer. In the world of bitcoin, users create lots of transactions every second, and bitcoin miners collect them together into batches called blocks, which they then add to the blockchain. Getting your transaction into a block on the blockchain is called getting it settled. Transactions can be canceled until they are settled so wallets (especially merchant wallets) typically don't consider them "legit" until they see them settle. New blocks/settlements happen *on average* every 10 minutes, but that number is not reliable, it's only an average. Typical times are a semi-random number of minutes between 1 and 60 and they average toward 10 *over time.*</p>
                <p>
                    Bitcoiners who use their wallet daily (like myself) frequently find themselves "stuck" waiting for a transaction to settle, refreshing their wallet constantly, even when their wallet says to please not do that. Wallet developers struggle to find ways to inform users of what's happening in a way that feels like miners are making progress. Ordinary progress bars don't suffice here because they need a solid target, and the target here is an unknown number likely-but-not-necessarily between 1 and 60.
                </p>
                <p>
                    However, statistical analysis of the blockchain, as well as a bit of number theory, has allowed bitcoin researchers to glean some hard numbers about how long it usually takes miners to find blocks. I call the following set of hard numbers "tiers," and this progress bar counts progress toward them:
                </p>
                <h2>The Defcon Levels</h2>
                <ol>
                    <li>10% of blocks are mined within 1 minute 4 seconds</li>
                    <li>25% of blocks are mined within 2 minutes 53 seconds</li>
                    <li>50% of blocks are mined within 6 minutes 56 seconds</li>
                    <li>75% of blocks are mined within 13 minutes 52 seconds</li>
                    <li>90% of blocks are mined within 23 minutes 2 seconds</li>
                    <li>95% of blocks are mined within 29 minutes 56 seconds</li>
                    <li>97.5% of blocks are mined within 36 minutes 53 seconds</li>
                    <li>99% of blocks are mined within 46 minutes 6 seconds</li>
                    <li>And so on</li>
                </ol>
                <p>
                    Since we have these hard numbers which nearly approach 100%, I made progress bars out of them. The tiers also have minute-and-second numbers associated with them so I use those to show a relatively smooth incrementation that at least makes it *feel like* miners are making measurable progress toward finding the next block.
                </p>
                <h2>The formula</h2>
                <p>
                    The tiers are based on the following formula: 1 - e^(-1)
                </p>
                <p>
                    The number -1 is what you modify to calculate the tiers. -1 means a period of 10 minutes. -2 means a period of 20 minutes, and so on. It also works for decimals: -0.4 means a period of 4 minutes, -0.5 means a period of 5 minutes, and so on. To get the formula to give me "round percentages" I made this javascript version: ( 1 - Math.E**(-num_of_seconds / ( 10 * 60 ) ) ) * 100 -- and I modify the variable num_of_seconds til I get a percentage like 10% or 25% or whatever I want.
                </p>
            </div>
            <div class="toast"></div>
          </div>
          <div class="graphs">
            <div class="progress">
                <div class="y">
                <p><span style="font-weight: bold;">Next tier: </span><span class="ttnt">loading...</span></p>
                    <div class="ttnb_progressOutline" >
                        <div class="ttnb_progressBar" ></div>
                    </div>
                </div>
                <div class="y">
                    <p><span style="font-weight: bold;">Percent of blocks found by now: </span><span class="current_percent">loading...</span></p>
                    <div class="total_progressOutline">
                        <div class="total_progressBar"></div>
                    </div>
                </div>
                <div class="ttnb_status"></div>
            </div>
          </div>
            <div class="graphs">
                <div class="progress1">
                    <p class="ex"><span class="num_big">loading...</span> blocks in the past 24 hours had more than 7 transactions per second:</p>
                    <ol class="big_blocks">loading...</ol>
                    <button id="refreshButton">Refresh TPS Data</button>
                    <p class="ex">Loading <span class="cur_load">0</span> out of <span class="total_load"></span></p>
                    <p class="ex">Block with the most transactions per second: <span class="most_tps"></span></p>
                    <p class="ex">Average transactions per second in the past 24 hours: <span class="avg_tps"></span></p>
                </div>
            </div>
        </div>    
        <div id="myModal" class="modal" style="display: block;">
            <div class="modal-content">
            </br>
            </br>
              <p class="mp">Will the next block ever be mined? This is a tool to help you determine how close we are to total Bitcoin network difficulty adjustment death spiral. Gird your loins and then step into the inner chamber and analyse this most important of on-chain information. The internal soundtrack will increase in intensity as the time between blocks increases.</p>
              <span class="close">Proceed to the inner chamber.</span>
                </br>
                </br>
                </br>
            </div>
          </div>
          <div id="myModalz" class="modalz" style="display: block;">
            <div class="modalz-content">
            </br>
            </br>
            </br>
            </br>
            <span class="closez">ENTER</span>
            </br>
            </br>
            </br>
            </br>
            </br>
            <button id="themez">Theme</button>
            </br>
            </br>
            </br>
            </br>
            </br>
            </br>
            </br>
            <a class="escape" href="https://dashboard.clarkmoody.com/" target="_blank">Escape</a>
            </div>
          </div>
    </body>
</html>
